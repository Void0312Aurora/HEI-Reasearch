# Research Object Specification v0.3 (Geometric Entity)
Date: 2025-12-30
Status: Draft

This document defines the interface, state space, and validation contract for the "HEI Entity v0.3" (Geometric-Generator Realization). This supercedes v0.2.

## 1. Geometric Object ($M$)
The Entity's internal state lives on a Contact Manifold $M = T^*Q \times \mathbb{R}$.

### 1.1 State Components
The state vector $x_{int}$ is explicitly structured into three components: $(q, p, s)$.

| Component | Symbol | Space | Shape | Description |
| :--- | :--- | :--- | :--- | :--- |
| **Configuration** | $q$ | $Q$ (Manifold) | $(B, d_q)$ | The "position" or content of the state. Subject to metric $g_Q$ (e.g. Hyperbolic). |
| **Momentum** | $p$ | $T^*_q Q$ | $(B, d_q)$ | The "change/intent" vector. Conjugate to $q$. |
| **Contact** | $s$ | $\mathbb{R}$ | $(B, 1)$ | The "scale/budget/action" potential. Global scalar for dissipation/control. |

**Total Dimension**: $d_{int} = 2 d_q + 1$.

### 1.2 Accessor Contract
Any implementation MUST provide accessors:
*   `entity.state.q` -> Tensor
*   `entity.state.p` -> Tensor
*   `entity.state.s` -> Tensor

## 2. Generator ($H$)
The dynamics are generated by a Contact Hamiltonian $H: M \to \mathbb{R}$.

### 2.1 Contact Equations
The one-step map $T: M \to M$ must approximate the flow of:
$$
\begin{aligned}
\dot{q} &= \frac{\partial H}{\partial p} \\
\dot{p} &= -\left(\frac{\partial H}{\partial q} + p \frac{\partial H}{\partial s}\right) \\
\dot{s} &= p \cdot \frac{\partial H}{\partial p} - H
\end{aligned}
$$

### 2.2 Template Families
*   **Dissipative**: $H = \frac{1}{2}p^2 + V(q) + \alpha s$. (Recovers standard damping).
*   **Driven**: $H = H_{sys} + H_{ctrl}(u_{env}, u_{self})$.

## 3. Atlas Structure (Charts)
The Manifold $Q$ is covered by a set of Charts $\{(U_k, \phi_k)\}$.

*   **Chart State**: $x_{int}$ is local to the active Chart $k$.
*   **Transition**: In overlap $U_i \cap U_j$, state must satisfy transition consistency $\phi_{ij}$.

## 4. Interface Projections ($\mathcal{O}_m$)
The Entity communicates via Interfaces that project $M \to X_{ext}$.

*   `Sensory` ($u_{env}$): Input Projection.
*   `Active` ($u_{self}$): Output Projection from $M$.
*   **Axiom A5**: Replacing $\mathcal{O}_a$ with $\mathcal{O}_b$ does not alter the definition of $(q,p,s)$ dynamics, only the coupling terms.

## 5. Log Contract
Updated to include geometric components.

```json
{
  "step": "int",
  "q_norm": "float (|q|)",
  "p_norm": "float (|p|)",
  "s_val": "float (s)",
  "H_val": "float (Hamiltonian value)",
  "sensory": "float[]",
  "active": "float[]"
}
```
